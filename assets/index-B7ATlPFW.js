import{c as D,r as n,j as P}from"./index-BTxu30yM.js";import{M as K,i as z,u as W,P as U,a as q,b as B,L as F}from"./client-B2Qnqt8j.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=D("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function H(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function G(...e){return r=>{let t=!1;const o=e.map(u=>{const f=H(u,r);return!t&&typeof f=="function"&&(t=!0),f});if(t)return()=>{for(let u=0;u<o.length;u++){const f=o[u];typeof f=="function"?f():H(e[u],null)}}}}function T(...e){return n.useCallback(G(...e),e)}class V extends n.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const o=t.offsetParent,u=z(o)&&o.offsetWidth||0,f=z(o)&&o.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=u-s.width-s.left,s.bottom=f-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function X({children:e,isPresent:r,anchorX:t,anchorY:o,root:u,pop:f}){var c;const s=n.useId(),C=n.useRef(null),M=n.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:E}=n.useContext(K),l=((c=e.props)==null?void 0:c.ref)??(e==null?void 0:e.ref),y=T(C,l);return n.useInsertionEffect(()=>{const{width:a,height:p,top:x,left:g,right:v,bottom:L}=M.current;if(r||f===!1||!C.current||!a||!p)return;const $=t==="left"?`left: ${g}`:`right: ${v}`,d=o==="bottom"?`bottom: ${L}`:`top: ${x}`;C.current.dataset.motionPopId=s;const m=document.createElement("style");E&&(m.nonce=E);const R=u??document.head;return R.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${p}px !important;
            ${$}px !important;
            ${d}px !important;
          }
        `),()=>{R.contains(m)&&R.removeChild(m)}},[r]),P.jsx(V,{isPresent:r,childRef:C,sizeRef:M,pop:f,children:f===!1?e:n.cloneElement(e,{ref:y})})}const Y=({children:e,initial:r,isPresent:t,onExitComplete:o,custom:u,presenceAffectsLayout:f,mode:s,anchorX:C,anchorY:M,root:E})=>{const l=W(_),y=n.useId();let c=!0,a=n.useMemo(()=>(c=!1,{id:y,initial:r,isPresent:t,custom:u,onExitComplete:p=>{l.set(p,!0);for(const x of l.values())if(!x)return;o&&o()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[t,l,o]);return f&&c&&(a={...a}),n.useMemo(()=>{l.forEach((p,x)=>l.set(x,!1))},[t]),n.useEffect(()=>{!t&&!l.size&&o&&o()},[t]),e=P.jsx(X,{pop:s==="popLayout",isPresent:t,anchorX:C,anchorY:M,root:E,children:e}),P.jsx(U.Provider,{value:a,children:e})};function _(){return new Map}const k=e=>e.key||"";function S(e){const r=[];return n.Children.forEach(e,t=>{n.isValidElement(t)&&r.push(t)}),r}const Q=({children:e,custom:r,initial:t=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:f="sync",propagate:s=!1,anchorX:C="left",anchorY:M="top",root:E})=>{const[l,y]=q(s),c=n.useMemo(()=>S(e),[e]),a=s&&!l?[]:c.map(k),p=n.useRef(!0),x=n.useRef(c),g=W(()=>new Map),v=n.useRef(new Set),[L,$]=n.useState(c),[d,m]=n.useState(c);B(()=>{p.current=!1,x.current=c;for(let h=0;h<d.length;h++){const i=k(d[h]);a.includes(i)?(g.delete(i),v.current.delete(i)):g.get(i)!==!0&&g.set(i,!1)}},[d,a.length,a.join("-")]);const R=[];if(c!==L){let h=[...c];for(let i=0;i<d.length;i++){const w=d[i],j=k(w);a.includes(j)||(h.splice(i,0,w),R.push(w))}return f==="wait"&&R.length&&(h=R),m(S(h)),$(c),null}const{forceRender:b}=n.useContext(F);return P.jsx(P.Fragment,{children:d.map(h=>{const i=k(h),w=s&&!l?!1:c===d||a.includes(i),j=()=>{if(v.current.has(i))return;if(v.current.add(i),g.has(i))g.set(i,!0);else return;let I=!0;g.forEach(A=>{A||(I=!1)}),I&&(b==null||b(),m(x.current),s&&(y==null||y()),o&&o())};return P.jsx(Y,{isPresent:w,initial:!p.current||t?void 0:!1,custom:r,presenceAffectsLayout:u,mode:f,root:E,onExitComplete:w?void 0:j,anchorX:C,anchorY:M,children:h},i)})})};export{Q as A,O as R};
